<table class="table table-hover">
    <thead>
        <tr>
            <th>Image</th>
            <th>Name</th>
            <th>Scott #</th>
            <th>Issue Date</th>
            <th>Box</th>
        </tr>
    </thead>
    <tbody id="list-container">
        {{range .}}
        <tr>
            <td>
                {{if and .ImageURL (ne (deref .ImageURL) "")}}
                    <img src="{{deref .ImageURL}}" 
                         alt="{{.Name}}" 
                         class="stamp-thumbnail"
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="stamp-thumbnail-placeholder" style="display: none;"></div>
                {{else}}
                    <div class="stamp-thumbnail-placeholder"></div>
                {{end}}
            </td>
            <td>
                <a href="#" 
                   hx-get="/views/stamps/detail/{{.ID}}"
                   hx-target="#stamp-view-content"
                   hx-swap="innerHTML"
                   class="text-decoration-none">
                    {{.Name}}
                </a>
            </td>
            <td>
                <a href="#" 
                   hx-get="/views/stamps/detail/{{.ID}}"
                   hx-target="#stamp-view-content"
                   hx-swap="innerHTML"
                   class="text-decoration-none">
                    {{.ScottNumber}}
                </a>
            </td>
            <td>{{.IssueDate}}</td>
            <td>{{.BoxName}}</td>
        </tr>
        {{else}}
        <tr>
            <td colspan="5" class="text-center py-5">
                <p class="text-muted">No stamps found matching your criteria.</p>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>

{{if .}}
<!-- Infinite scroll trigger for list view -->
<div id="load-more-trigger-list" 
     class="text-center py-4"
     hx-get="/views/stamps/list/more"
     hx-trigger="intersect once"
     hx-target="#list-container"
     hx-swap="beforeend"
     hx-include="[name='search'], [name='owned_filter']:checked, #current-filters-list"
     hx-indicator="#load-more-spinner-list">
    <div id="load-more-spinner-list" class="htmx-indicator">
        <div class="spinner-border spinner-border-sm text-muted" role="status">
            <span class="visually-hidden">Loading more stamps...</span>
        </div>
        <p class="text-muted mt-2">Loading more stamps...</p>
    </div>
</div>

<!-- Hidden inputs to track current state for infinite scroll -->
<input type="hidden" id="current-offset-list" value="50">
<input type="hidden" id="current-filters-list" name="current-filters-list" value="">
{{end}}